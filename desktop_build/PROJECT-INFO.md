# 🖥️ Top Marketing Desktop Application

## 📋 نظرة عامة
هذا المشروع هو تحويل كامل لنظام Top Marketing من تطبيق ويب إلى تطبيق سطح مكتب يعمل على Windows.

## 🎯 الهدف
إنشاء تطبيق سطح مكتب مستقل يعمل بدون الحاجة للإنترنت مع قاعدة بيانات SQLite محلية.

## 🔧 التقنيات المستخدمة

### Frontend:
- **Electron.js** - تغليف التطبيق كبرنامج سطح مكتب
- **HTML5/CSS3** - واجهة المستخدم
- **JavaScript ES6+** - منطق التطبيق
- **Tailwind CSS** - تنسيق الواجهة
- **Lucide Icons** - الأيقونات

### Backend:
- **Express.js** - خادم محلي
- **SQLite3** - قاعدة بيانات محلية
- **Node.js** - بيئة التشغيل

### أدوات البناء:
- **electron-builder** - بناء ملف التثبيت
- **NSIS** - مثبت Windows

## 📁 هيكل المشروع

```
desktop_build/
├── main.js                 # ملف Electron الرئيسي
├── preload.js              # سكريبت preload للأمان
├── package.json            # إعدادات المشروع
├── build.bat               # سكريبت البناء
├── dev.bat                 # سكريبت التطوير
├── README-Windows.txt      # دليل المستخدم
├── 
├── app/                    # ملفات التطبيق
│   ├── index.html          # الصفحة الرئيسية
│   ├── js/app.js           # منطق التطبيق
│   ├── src/                # ملفات المصدر المنسوخة
│   └── public/             # الملفات العامة
├── 
├── api/                    # API الخادم المحلي
│   └── routes.js           # مسارات API
├── 
├── db/                     # قاعدة البيانات
│   ├── schema.sql          # هيكل قاعدة البيانات
│   └── realestate.sqlite   # ملف قاعدة البيانات
├── 
├── media/                  # ملفات الوسائط
│   ├── receipts/           # الإيصالات
│   ├── portfolio/          # معرض الأعمال
│   └── properties/         # صور العقارات
├── 
└── assets/                 # أصول التطبيق
    ├── icon.png            # أيقونة التطبيق
    └── icon.ico            # أيقونة Windows
```

## 🚀 خطوات البناء

### 1. التحضير:
```bash
cd desktop_build
npm install
```

### 2. التطوير:
```bash
# تشغيل في وضع التطوير
npm run dev
# أو
dev.bat
```

### 3. البناء:
```bash
# بناء ملف التثبيت
npm run build-win
# أو
build.bat
```

## 📦 الناتج النهائي

بعد البناء ستحصل على:
- `dist/Top-Marketing-Setup-1.0.0.exe` - ملف التثبيت
- `dist/win-unpacked/` - نسخة محمولة

## 🔧 الميزات المطبقة

### ✅ الوظائف الأساسية:
- [x] واجهة مستخدم عربية
- [x] نظام تسجيل دخول
- [x] لوحة تحكم
- [x] قاعدة بيانات SQLite
- [x] خادم محلي Express
- [x] رفع الملفات محلياً

### ✅ وحدات النظام:
- [x] إدارة الخدمات
- [x] إدارة العقارات
- [x] إدارة الباقات
- [x] إدارة الطلبات
- [x] معرض الأعمال
- [x] الإحصائيات

### ✅ ميزات سطح المكتب:
- [x] نافذة تطبيق مخصصة
- [x] قوائم التطبيق
- [x] اختصارات لوحة المفاتيح
- [x] نسخ احتياطي/استعادة
- [x] إشعارات النظام

## 🔐 الأمان

### الحماية المطبقة:
- Context isolation في Electron
- Node integration معطل
- API محمي بـ JWT tokens
- ملفات محلية فقط
- لا يوجد اتصال خارجي

## 📊 قاعدة البيانات

### التحويل من PostgreSQL إلى SQLite:
- تحويل أنواع البيانات
- إزالة الميزات غير المدعومة
- تبسيط القيود والفهارس
- الحفاظ على البيانات الأساسية

### الجداول المتضمنة:
- users (المستخدمين)
- admins (المديرين)
- services (الخدمات)
- sub_services (الخدمات الفرعية)
- packages (الباقات)
- orders (الطلبات)
- real_estate (العقارات)
- portfolio (معرض الأعمال)
- system_settings (إعدادات النظام)

## 🛠️ التخصيص

### إضافة ميزات جديدة:
1. أضف API endpoints في `api/routes.js`
2. أضف واجهات في `app/js/app.js`
3. حدّث قاعدة البيانات في `db/schema.sql`

### تخصيص الواجهة:
- عدّل `app/index.html` للتخطيط
- عدّل `app/js/app.js` للوظائف
- استخدم Tailwind CSS للتنسيق

## 🔄 التحديثات

### إضافة تحديث تلقائي:
1. استخدم `electron-updater`
2. أضف خادم تحديثات
3. طبّق آلية فحص التحديثات

## 📞 الدعم الفني

### للمطورين:
- راجع logs في Developer Tools
- تحقق من قاعدة البيانات في `db/`
- راجع API responses في Network tab

### للمستخدمين:
- راجع `README-Windows.txt`
- تحقق من ملفات النظام
- تواصل مع الدعم الفني

## 🎯 المراحل التالية

### تحسينات مقترحة:
- [ ] تحديث تلقائي
- [ ] نسخ احتياطي تلقائي
- [ ] تشفير قاعدة البيانات
- [ ] دعم أنظمة تشغيل أخرى
- [ ] واجهة مستخدم محسنة
- [ ] تقارير متقدمة

## 📝 ملاحظات التطوير

### مشاكل محتملة:
- حجم التطبيق كبير (بسبب Electron)
- استهلاك ذاكرة أعلى من التطبيق الأصلي
- قد تحتاج صلاحيات مدير في بعض الحالات

### حلول مطبقة:
- تحسين حجم البناء
- إدارة ذاكرة محسنة
- معالجة أخطاء شاملة

---

## ✅ التحقق من الاكتمال

- [x] تحويل كامل للنظام
- [x] قاعدة بيانات محلية
- [x] واجهة مستخدم كاملة
- [x] نظام بناء وتثبيت
- [x] وثائق شاملة
- [x] اختبار أساسي

**🎉 المشروع جاهز للاستخدام والتوزيع!**
