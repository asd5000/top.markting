# Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª - Top Marketing

## ðŸ“‹ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯

### 1. Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Supabase Ø¬Ø¯ÙŠØ¯
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ [Supabase Dashboard](https://supabase.com/dashboard)
2. Ø£Ù†Ø´Ø¦ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯
3. Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠÙƒØªÙ…Ù„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯

### 2. ØªØ´ØºÙŠÙ„ Ù…Ù„ÙØ§Øª SQL

#### Ø£. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ (schema.sql)
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ SQL Editor ÙÙŠ Supabase Dashboard
2. Ø§Ù†Ø³Ø® Ù…Ø­ØªÙˆÙ‰ Ù…Ù„Ù `schema.sql`
3. Ø´ØºÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
4. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­

#### Ø¨. Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© (seed.sql)
1. Ø§Ù†Ø³Ø® Ù…Ø­ØªÙˆÙ‰ Ù…Ù„Ù `seed.sql`
2. Ø´ØºÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
3. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©

#### Ø¬. ØªÙØ¹ÙŠÙ„ Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† (rls.sql)
1. Ø§Ù†Ø³Ø® Ù…Ø­ØªÙˆÙ‰ Ù…Ù„Ù `rls.sql`
2. Ø´ØºÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
3. ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ¹ÙŠÙ„ RLS Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„

### 3. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

#### ØªÙØ¹ÙŠÙ„ Ù…Ù‚Ø¯Ù…ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Authentication > Providers
2. ÙØ¹Ù„ Email provider
3. Ø§Ø®ØªÙŠØ§Ø±ÙŠ: ÙØ¹Ù„ Google, GitHub, Ø¥Ù„Ø®

#### Ø¥Ø¹Ø¯Ø§Ø¯ URL Redirects
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Authentication > URL Configuration
2. Ø£Ø¶Ù:
   - Site URL: `http://localhost:3000`
   - Redirect URLs: `http://localhost:3000/auth/callback`

### 4. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØ§ØªÙŠØ­ API

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Settings > API
2. Ø§Ù†Ø³Ø®:
   - Project URL
   - anon public key
   - service_role key (Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… ÙÙ‚Ø·)

### 5. Ø¥Ø¹Ø¯Ø§Ø¯ Storage (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)

#### Ø¥Ù†Ø´Ø§Ø¡ Buckets
```sql
-- Ø¥Ù†Ø´Ø§Ø¡ bucket Ù„Ù„ØµÙˆØ±
INSERT INTO storage.buckets (id, name, public) VALUES ('images', 'images', true);

-- Ø¥Ù†Ø´Ø§Ø¡ bucket Ù„Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª
INSERT INTO storage.buckets (id, name, public) VALUES ('receipts', 'receipts', false);

-- Ø¥Ù†Ø´Ø§Ø¡ bucket Ù„Ù„Ø¹Ù‚Ø§Ø±Ø§Øª
INSERT INTO storage.buckets (id, name, public) VALUES ('real-estate', 'real-estate', true);
```

#### Ø³ÙŠØ§Ø³Ø§Øª Storage
```sql
-- Ø³ÙŠØ§Ø³Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡
CREATE POLICY "Users can upload images" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'images' AND auth.role() = 'authenticated');

-- Ø³ÙŠØ§Ø³Ø© Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø¹Ø§Ù…Ø©
CREATE POLICY "Public images are viewable" ON storage.objects
FOR SELECT USING (bucket_id = 'images');

-- Ø³ÙŠØ§Ø³Ø© Ø±ÙØ¹ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª
CREATE POLICY "Users can upload receipts" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'receipts' AND auth.role() = 'authenticated');

-- Ø³ÙŠØ§Ø³Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª Ù„Ù„Ù…Ø§Ù„Ùƒ ÙÙ‚Ø·
CREATE POLICY "Users can view own receipts" ON storage.objects
FOR SELECT USING (bucket_id = 'receipts' AND auth.uid()::text = (storage.foldername(name))[1]);
```

## ðŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯

### ÙØ­Øµ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
```sql
-- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' 
ORDER BY table_name;

-- ÙØ­Øµ Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ù„Ø§Øª ÙÙŠ ÙƒÙ„ Ø¬Ø¯ÙˆÙ„
SELECT 
  schemaname,
  tablename,
  attname,
  n_distinct,
  correlation
FROM pg_stats
WHERE schemaname = 'public';
```

### ÙØ­Øµ RLS
```sql
-- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙØ¹ÙŠÙ„ RLS
SELECT schemaname, tablename, rowsecurity 
FROM pg_tables 
WHERE schemaname = 'public';

-- Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª
SELECT schemaname, tablename, policyname, permissive, roles, cmd, qual 
FROM pg_policies 
WHERE schemaname = 'public';
```

### ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
```sql
-- ÙØ­Øµ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
SELECT id, name, is_active FROM services;

-- ÙØ­Øµ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ©
SELECT s.name as service, ss.name as sub_service, ss.price 
FROM services s 
JOIN sub_services ss ON s.id = ss.service_id 
ORDER BY s.name, ss.name;

-- ÙØ­Øµ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª
SELECT name, price, duration_months FROM packages;

-- ÙØ­Øµ Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠÙ†
SELECT full_name, email, role, is_active FROM managers;
```

## ðŸ› ï¸ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Ù…Ø´Ø§ÙƒÙ„ Ø´Ø§Ø¦Ø¹Ø© ÙˆØ­Ù„ÙˆÙ„Ù‡Ø§

#### 1. Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
```sql
-- Ø­Ø°Ù Ø¬Ø¯ÙˆÙ„ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¤Ù‡
DROP TABLE IF EXISTS table_name CASCADE;
-- Ø«Ù… Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ schema.sql
```

#### 2. Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ RLS
```sql
-- ØªØ¹Ø·ÙŠÙ„ RLS Ù…Ø¤Ù‚ØªØ§Ù‹ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
ALTER TABLE table_name DISABLE ROW LEVEL SECURITY;

-- Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ RLS
ALTER TABLE table_name ENABLE ROW LEVEL SECURITY;
```

#### 3. Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
```sql
-- Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø¥Ø¯Ø±Ø§Ø¬Ù‡Ø§
TRUNCATE TABLE table_name RESTART IDENTITY CASCADE;
-- Ø«Ù… Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ seed.sql
```

#### 4. Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
```sql
-- Ù…Ù†Ø­ ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚ Ø¹Ù„ÙŠÙ‡
GRANT ALL ON ALL TABLES IN SCHEMA public TO authenticated;
GRANT ALL ON ALL SEQUENCES IN SCHEMA public TO authenticated;
```

## ðŸ“Š Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡

### Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù…ÙÙŠØ¯Ø© Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
```sql
-- Ø­Ø¬Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
SELECT pg_size_pretty(pg_database_size(current_database()));

-- Ø­Ø¬Ù… ÙƒÙ„ Ø¬Ø¯ÙˆÙ„
SELECT 
  schemaname,
  tablename,
  pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) as size
FROM pg_tables 
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;

-- Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø¨Ø·ÙŠØ¦Ø©
SELECT query, mean_time, calls 
FROM pg_stat_statements 
ORDER BY mean_time DESC 
LIMIT 10;
```

## ðŸ”„ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©

### Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
```bash
# Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… pg_dump
pg_dump -h your-host -U postgres -d your-database > backup.sql

# Ø£Ùˆ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase CLI
supabase db dump -f backup.sql
```

### Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
```bash
# Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… psql
psql -h your-host -U postgres -d your-database < backup.sql

# Ø£Ùˆ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase CLI
supabase db reset --db-url "your-connection-string"
```

## ðŸ“ž Ø§Ù„Ø¯Ø¹Ù…

Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ø£ÙŠ Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
1. Ø±Ø§Ø¬Ø¹ [ÙˆØ«Ø§Ø¦Ù‚ Supabase](https://supabase.com/docs)
2. ØªØ­Ù‚Ù‚ Ù…Ù† [Ù…Ø¬ØªÙ…Ø¹ Supabase](https://github.com/supabase/supabase/discussions)
3. Ø§ØªØµÙ„ Ø¨ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ

---

**Ù…Ù„Ø§Ø­Ø¸Ø©**: ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø¥Ø¬Ø±Ø§Ø¡ Ø£ÙŠ ØªØºÙŠÙŠØ±Ø§Øª ÙƒØ¨ÙŠØ±Ø©.
