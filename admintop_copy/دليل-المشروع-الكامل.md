# 📚 الدليل الشامل لمشروع Top Marketing
## نظام إدارة التسويق المتكامل - الدليل الكامل بالعربية

---

## 🎯 نظرة عامة على المشروع

### **اسم المشروع:**
- **بالعربية:** نظام إدارة التسويق المتكامل
- **بالإنجليزية:** Top Marketing Management System

### **الوصف:**
منصة شاملة لإدارة خدمات التصميم والتسويق والمونتاج وصفحات السوشيال ميديا مع نظام إدارة العقارات المتكامل.

### **التقنيات المستخدمة:**
- **Frontend:** Next.js 13+ مع TypeScript
- **Styling:** Tailwind CSS مع دعم RTL للعربية
- **Database:** Supabase (PostgreSQL)
- **Authentication:** Supabase Auth
- **Icons:** Lucide React
- **Deployment:** Vercel

---

## 📁 هيكل المشروع وشرح المجلدات

### **الملفات الجذرية (Root Files):**

#### `package.json`
- **الوصف بالعربية:** ملف إعدادات المشروع والمكتبات
- **الوصف بالإنجليزية:** Project configuration and dependencies file
- **المحتوى:** قائمة بجميع المكتبات المطلوبة وأوامر التشغيل

#### `next.config.js`
- **الوصف بالعربية:** ملف إعدادات Next.js
- **الوصف بالإنجليزية:** Next.js configuration file
- **المحتوى:** إعدادات الصور، الدومينات، والتحسينات

#### `tailwind.config.js`
- **الوصف بالعربية:** ملف إعدادات Tailwind CSS
- **الوصف بالإنجليزية:** Tailwind CSS configuration file
- **المحتوى:** ألوان مخصصة، خطوط، ودعم RTL

#### `tsconfig.json`
- **الوصف بالعربية:** ملف إعدادات TypeScript
- **الوصف بالإنجليزية:** TypeScript configuration file
- **المحتوى:** قواعد التحقق من الأنواع والمسارات

#### `postcss.config.js`
- **الوصف بالعربية:** ملف إعدادات PostCSS
- **الوصف بالإنجليزية:** PostCSS configuration file
- **المحتوى:** معالجات CSS والإضافات

#### `.env.example`
- **الوصف بالعربية:** مثال لملف متغيرات البيئة
- **الوصف بالإنجليزية:** Environment variables example file
- **المحتوى:** مفاتيح Supabase وإعدادات البيئة

#### `.gitignore`
- **الوصف بالعربية:** ملف تجاهل Git
- **الوصف بالإنجليزية:** Git ignore file
- **المحتوى:** قائمة الملفات المتجاهلة في Git

---

### **مجلد المصدر (src/):**

#### `src/app/` - صفحات التطبيق
- **الوصف بالعربية:** مجلد صفحات Next.js App Router
- **الوصف بالإنجليزية:** Next.js App Router pages directory

##### **المجلدات الفرعية:**

###### `(public)/` - الصفحات العامة
- **الوصف بالعربية:** صفحات الزوار والعملاء
- **الوصف بالإنجليزية:** Public visitor and customer pages
- **المحتوى:**
  - `page.tsx` - الصفحة الرئيسية
  - `services/` - صفحات الخدمات
  - `packages/` - صفحات الباقات
  - `real-estate/` - صفحة إضافة العقارات
  - `portfolio/` - معرض الأعمال
  - `contact/` - صفحة التواصل

###### `admin/` - لوحة تحكم الإدارة
- **الوصف بالعربية:** صفحات إدارة النظام
- **الوصف بالإنجليزية:** System administration pages
- **المحتوى:**
  - `dashboard/` - لوحة التحكم الرئيسية
  - `services/` - إدارة الخدمات
  - `packages/` - إدارة الباقات
  - `real-estate/` - إدارة العقارات
  - `orders/` - إدارة الطلبات
  - `users/` - إدارة المستخدمين
  - `portfolio/` - إدارة معرض الأعمال
  - `settings/` - إعدادات النظام

###### `api/` - واجهات برمجة التطبيقات
- **الوصف بالعربية:** نقاط اتصال API الداخلية
- **الوصف بالإنجليزية:** Internal API endpoints
- **المحتوى:**
  - `auth/` - مصادقة المستخدمين
  - `services/` - عمليات الخدمات
  - `packages/` - عمليات الباقات
  - `real-estate/` - عمليات العقارات
  - `upload/` - رفع الملفات

#### `src/components/` - مكونات واجهة المستخدم
- **الوصف بالعربية:** مكونات React القابلة لإعادة الاستخدام
- **الوصف بالإنجليزية:** Reusable React components

##### **المجلدات الفرعية:**

###### `admin/` - مكونات الإدارة
- **الوصف بالعربية:** مكونات خاصة بلوحة التحكم
- **الوصف بالإنجليزية:** Admin dashboard specific components
- **المحتوى:**
  - `Sidebar.tsx` - الشريط الجانبي
  - `Header.tsx` - رأس الصفحة
  - `StatsCards.tsx` - بطاقات الإحصائيات
  - `DataTable.tsx` - جداول البيانات

###### `ui/` - مكونات واجهة المستخدم العامة
- **الوصف بالعربية:** مكونات واجهة المستخدم الأساسية
- **الوصف بالإنجليزية:** Basic UI components
- **المحتوى:**
  - `Button.tsx` - الأزرار
  - `Input.tsx` - حقول الإدخال
  - `Modal.tsx` - النوافذ المنبثقة
  - `Card.tsx` - البطاقات

###### `forms/` - نماذج الإدخال
- **الوصف بالعربية:** نماذج إدخال البيانات
- **الوصف بالإنجليزية:** Data input forms
- **المحتوى:**
  - `ServiceForm.tsx` - نموذج الخدمات
  - `PackageForm.tsx` - نموذج الباقات
  - `PropertyForm.tsx` - نموذج العقارات

#### `src/lib/` - المكتبات والأدوات
- **الوصف بالعربية:** وظائف مساعدة وإعدادات
- **الوصف بالإنجليزية:** Helper functions and configurations

##### **الملفات:**

###### `supabase.ts`
- **الوصف بالعربية:** إعداد اتصال قاعدة البيانات
- **الوصف بالإنجليزية:** Database connection setup
- **المحتوى:** إعدادات Supabase والاتصال

###### `auth.ts`
- **الوصف بالعربية:** وظائف المصادقة والتحقق
- **الوصف بالإنجليزية:** Authentication and verification functions
- **المحتوى:** تسجيل الدخول، الخروج، التحقق من الصلاحيات

###### `utils.ts`
- **الوصف بالعربية:** وظائف مساعدة عامة
- **الوصف بالإنجليزية:** General utility functions
- **المحتوى:** تنسيق التواريخ، معالجة النصوص، التحقق من البيانات

###### `constants.ts`
- **الوصف بالعربية:** الثوابت والقيم الثابتة
- **الوصف بالإنجليزية:** Constants and fixed values
- **المحتوى:** أنواع العقارات، حالات الطلبات، الأدوار

#### `src/hooks/` - React Hooks مخصصة
- **الوصف بالعربية:** خطافات React مخصصة
- **الوصف بالإنجليزية:** Custom React hooks

##### **الملفات:**

###### `useAuth.ts`
- **الوصف بالعربية:** خطاف إدارة المصادقة
- **الوصف بالإنجليزية:** Authentication management hook

###### `useSupabase.ts`
- **الوصف بالعربية:** خطاف عمليات قاعدة البيانات
- **الوصف بالإنجليزية:** Database operations hook

#### `src/types/` - تعريفات TypeScript
- **الوصف بالعربية:** تعريفات أنواع البيانات
- **الوصف بالإنجليزية:** Data type definitions

##### **الملفات:**

###### `database.ts`
- **الوصف بالعربية:** أنواع جداول قاعدة البيانات
- **الوصف بالإنجليزية:** Database table types

###### `auth.ts`
- **الوصف بالعربية:** أنواع المصادقة والمستخدمين
- **الوصف بالإنجليزية:** Authentication and user types

---

### **مجلد قاعدة البيانات (database/):**

#### `schema.sql`
- **الوصف بالعربية:** هيكل قاعدة البيانات الكامل
- **الوصف بالإنجليزية:** Complete database schema
- **المحتوى:** جميع جداول قاعدة البيانات (17 جدول)

##### **الجداول الرئيسية:**

###### `users` - جدول المستخدمين
- **الوصف بالعربية:** بيانات الزوار والعملاء
- **الوصف بالإنجليزية:** Visitors and customers data
- **الحقول:** الاسم، البريد، الهاتف، الدور، تاريخ التسجيل

###### `admins` - جدول المديرين
- **الوصف بالعربية:** بيانات مديري النظام
- **الوصف بالإنجليزية:** System administrators data
- **الحقول:** اسم المستخدم، البريد، الدور، الصلاحيات

###### `services` - جدول الخدمات الأساسية
- **الوصف بالعربية:** الخدمات الرئيسية للشركة
- **الوصف بالإنجليزية:** Main company services
- **الحقول:** الاسم، الوصف، الأيقونة، اللون، الفئة

###### `sub_services` - جدول الخدمات الفرعية
- **الوصف بالعربية:** تفاصيل الخدمات وأسعارها
- **الوصف بالإنجليزية:** Service details and pricing
- **الحقول:** اسم الخدمة، السعر، مدة التسليم، المميزات

###### `packages` - جدول الباقات
- **الوصف بالعربية:** باقات الاشتراك والخدمات
- **الوصف بالإنجليزية:** Subscription and service packages
- **الحقول:** اسم الباقة، السعر، المدة، المميزات، الحدود

###### `orders` - جدول الطلبات
- **الوصف بالعربية:** طلبات العملاء والمدفوعات
- **الوصف بالإنجليزية:** Customer orders and payments
- **الحقول:** بيانات العميل، المبلغ، الحالة، طريقة الدفع

###### `real_estate` - جدول العقارات
- **الوصف بالعربية:** بيانات العقارات والعملاء
- **الوصف بالإنجليزية:** Real estate and customer data
- **الحقول:** نوع العقار، الموقع، السعر، المواصفات، الحالة

###### `portfolio` - جدول معرض الأعمال
- **الوصف بالعربية:** أعمال الشركة ومشاريعها
- **الوصف بالإنجليزية:** Company works and projects
- **الحقول:** العنوان، الوصف، الفئة، النوع، الصور

---

## 🚀 دليل التنصيب والتشغيل

### **المتطلبات الأساسية:**

#### **البرامج المطلوبة:**
1. **Node.js** (الإصدار 18 أو أحدث)
   - **التحميل:** https://nodejs.org/
   - **التحقق:** `node --version`

2. **NPM** (يأتي مع Node.js)
   - **التحقق:** `npm --version`

3. **Git** (اختياري)
   - **التحميل:** https://git-scm.com/
   - **التحقق:** `git --version`

#### **الخدمات المطلوبة:**
1. **Supabase** (قاعدة البيانات)
   - **الموقع:** https://supabase.com/
   - **النوع:** مجاني للمشاريع الصغيرة

### **خطوات التنصيب:**

#### **الخطوة 1: تحضير المشروع**
```bash
# الانتقال لمجلد المشروع
cd "C:\Users\Masrawy\Desktop\موقع اساسي"

# تثبيت المكتبات
npm install
```

#### **الخطوة 2: إعداد قاعدة البيانات**

##### **أ. إنشاء مشروع Supabase:**
1. اذهب إلى https://supabase.com/
2. أنشئ حساب جديد أو سجل دخول
3. اضغط "New Project"
4. اختر اسم المشروع وكلمة مرور قوية
5. اختر المنطقة الجغرافية (Europe West للشرق الأوسط)
6. انتظر 2-3 دقائق حتى يتم إنشاء المشروع

##### **ب. تطبيق هيكل قاعدة البيانات:**
1. اذهب إلى "SQL Editor" في لوحة تحكم Supabase
2. افتح ملف `database/schema.sql` من المشروع
3. انسخ المحتوى كاملاً
4. الصق في محرر SQL واضغط "Run"
5. تأكد من عدم وجود أخطاء

##### **ج. الحصول على مفاتيح الاتصال:**
1. اذهب إلى "Settings" → "API"
2. انسخ:
   - **Project URL** (رابط المشروع)
   - **anon public** (المفتاح العام)
   - **service_role** (المفتاح الخاص - اختياري)

#### **الخطوة 3: إعداد متغيرات البيئة**

##### **أ. إنشاء ملف البيئة:**
```bash
# نسخ ملف المثال
copy .env.example .env.local
```

##### **ب. تحرير ملف `.env.local`:**
```env
# إعدادات Supabase
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# بيئة التشغيل
NODE_ENV=development

# مفتاح الخدمة (اختياري للمميزات المتقدمة)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

**⚠️ مهم:** استبدل القيم بالمفاتيح الحقيقية من مشروع Supabase

#### **الخطوة 4: تشغيل المشروع**

##### **للتطوير المحلي:**
```bash
npm run dev
```
الموقع سيعمل على: `http://localhost:3000`

##### **للإنتاج:**
```bash
# بناء المشروع
npm run build

# تشغيل الإنتاج
npm start
```

---

## 🌐 دليل النشر على الاستضافات

### **Vercel (موصى به - مجاني):**

#### **الخطوات:**
1. **رفع المشروع إلى GitHub:**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/username/top-marketing.git
   git push -u origin main
   ```

2. **ربط Vercel:**
   - اذهب إلى https://vercel.com/
   - سجل دخول بحساب GitHub
   - اضغط "New Project"
   - اختر المستودع
   - اضغط "Deploy"

3. **إضافة متغيرات البيئة:**
   - اذهب إلى Project Settings → Environment Variables
   - أضف جميع المتغيرات من ملف `.env.local`

### **Netlify (بديل مجاني):**

#### **الخطوات:**
1. رفع إلى GitHub (نفس خطوات Vercel)
2. اذهب إلى https://netlify.com/
3. "New site from Git"
4. اختر GitHub والمستودع
5. Build command: `npm run build`
6. Publish directory: `.next`
7. أضف متغيرات البيئة في Site Settings

### **Railway (للمشاريع المتقدمة):**

#### **المميزات:**
- دعم قواعد البيانات
- نشر سهل
- مراقبة الأداء

#### **الخطوات:**
1. اذهب إلى https://railway.app/
2. "Deploy from GitHub repo"
3. اختر المستودع
4. أضف متغيرات البيئة
5. النشر التلقائي

---

## 🔧 دليل التخصيص والتطوير

### **إضافة ميزات جديدة:**

#### **إضافة صفحة جديدة:**
1. أنشئ مجلد في `src/app/`
2. أضف ملف `page.tsx`
3. أضف التوجيه في القائمة

#### **إضافة مكون جديد:**
1. أنشئ ملف في `src/components/`
2. اكتب المكون بـ TypeScript
3. صدّر المكون للاستخدام

#### **إضافة جدول جديد:**
1. أضف CREATE TABLE في `schema.sql`
2. أضف النوع في `src/types/database.ts`
3. أنشئ API endpoints في `src/app/api/`

### **تخصيص التصميم:**

#### **تغيير الألوان:**
- عدّل `tailwind.config.js`
- أضف ألوان مخصصة في theme.extend.colors

#### **تغيير الخطوط:**
- أضف خطوط Google Fonts في `layout.tsx`
- حدّث `tailwind.config.js`

#### **تخصيص المكونات:**
- عدّل ملفات المكونات في `src/components/ui/`
- استخدم Tailwind classes للتنسيق

---

## 📊 شرح قاعدة البيانات بالتفصيل

### **الجداول الأساسية:**

#### **1. جدول المستخدمين (users):**
```sql
-- بيانات الزوار والعملاء
CREATE TABLE users (
    id UUID PRIMARY KEY,           -- المعرف الفريد
    email VARCHAR(255) UNIQUE,     -- البريد الإلكتروني
    name VARCHAR(255),             -- الاسم الكامل
    phone VARCHAR(20),             -- رقم الهاتف
    role VARCHAR(50),              -- الدور (visitor, customer)
    created_at TIMESTAMPTZ         -- تاريخ التسجيل
);
```

#### **2. جدول المديرين (admins):**
```sql
-- بيانات مديري النظام
CREATE TABLE admins (
    id UUID PRIMARY KEY,           -- المعرف الفريد
    username VARCHAR(100) UNIQUE,  -- اسم المستخدم
    email VARCHAR(255) UNIQUE,     -- البريد الإلكتروني
    name VARCHAR(255),             -- الاسم الكامل
    role VARCHAR(50),              -- الدور الإداري
    permissions JSONB,             -- الصلاحيات
    created_at TIMESTAMPTZ         -- تاريخ الإنشاء
);
```

#### **3. جدول الخدمات (services):**
```sql
-- الخدمات الأساسية
CREATE TABLE services (
    id UUID PRIMARY KEY,           -- المعرف الفريد
    name VARCHAR(255),             -- اسم الخدمة
    description TEXT,              -- وصف الخدمة
    icon VARCHAR(50),              -- أيقونة الخدمة
    custom_color VARCHAR(7),       -- لون مخصص
    is_active BOOLEAN,             -- حالة التفعيل
    sort_order INTEGER             -- ترتيب العرض
);
```

#### **4. جدول الخدمات الفرعية (sub_services):**
```sql
-- تفاصيل الخدمات والأسعار
CREATE TABLE sub_services (
    id UUID PRIMARY KEY,           -- المعرف الفريد
    service_id UUID,               -- ربط بالخدمة الأساسية
    name VARCHAR(255),             -- اسم الخدمة الفرعية
    price NUMERIC,                 -- السعر
    delivery_time VARCHAR(50),     -- مدة التسليم
    features JSONB,                -- المميزات
    is_active BOOLEAN              -- حالة التفعيل
);
```

#### **5. جدول الباقات (packages):**
```sql
-- باقات الاشتراك
CREATE TABLE packages (
    id UUID PRIMARY KEY,           -- المعرف الفريد
    name VARCHAR(255),             -- اسم الباقة
    price NUMERIC,                 -- السعر الشهري
    duration_months INTEGER,       -- مدة الاشتراك
    features JSONB,                -- المميزات المتضمنة
    max_designs INTEGER,           -- حد التصاميم
    max_videos INTEGER,            -- حد الفيديوهات
    includes_management BOOLEAN    -- إدارة الصفحات
);
```

#### **6. جدول العقارات (real_estate):**
```sql
-- بيانات العقارات
CREATE TABLE real_estate (
    id UUID PRIMARY KEY,           -- المعرف الفريد
    customer_name VARCHAR(255),    -- اسم العميل
    customer_phone VARCHAR(20),    -- هاتف العميل
    property_type VARCHAR(50),     -- نوع العقار
    operation_type VARCHAR(50),    -- نوع العملية (بيع/شراء)
    price NUMERIC,                 -- السعر
    area NUMERIC,                  -- المساحة
    governorate VARCHAR(100),      -- المحافظة
    city VARCHAR(100),             -- المدينة
    status VARCHAR(50),            -- حالة العقار
    images JSONB,                  -- صور العقار
    created_at TIMESTAMPTZ         -- تاريخ الإضافة
);
```

---

## 🔐 نظام الأدوار والصلاحيات

### **أدوار المديرين:**

#### **1. المدير العام (super_admin):**
- **الصلاحيات:** كامل النظام
- **الوصول:** جميع الوحدات
- **المسؤوليات:** إدارة المديرين، النسخ الاحتياطي، الإعدادات

#### **2. مدير التسويق (marketing_manager):**
- **الصلاحيات:** الخدمات والباقات
- **الوصول:** إدارة الخدمات، الباقات، معرض الأعمال
- **المسؤوليات:** تحديث الخدمات، إدارة الأسعار

#### **3. مدير العقارات (real_estate_manager):**
- **الصلاحيات:** العقارات فقط
- **الوصول:** نظام العقارات، المطابقة، التقارير
- **المسؤوليات:** متابعة العقارات، المطابقة

#### **4. مدير الباقات (packages_manager):**
- **الصلاحيات:** الباقات والاشتراكات
- **الوصول:** إدارة الباقات، الاشتراكات، التقارير
- **المسؤوليات:** تحديث الباقات، متابعة الاشتراكات

#### **5. الدعم الفني (support):**
- **الصلاحيات:** كل شيء عدا إدارة المديرين
- **الوصول:** الطلبات، العملاء، المتابعة
- **المسؤوليات:** دعم العملاء، حل المشاكل

---

## 📞 الدعم الفني والمساعدة

### **للمساعدة التقنية:**
- **البريد الإلكتروني:** asdasheref@gmail.com
- **واتساب:** +201068275557
- **ساعات العمل:** 9 صباحاً - 6 مساءً (توقيت القاهرة)

### **الموارد المفيدة:**
- **وثائق Next.js:** https://nextjs.org/docs
- **وثائق Supabase:** https://supabase.com/docs
- **وثائق Tailwind CSS:** https://tailwindcss.com/docs

### **المجتمع والدعم:**
- **GitHub Issues:** لتقارير الأخطاء
- **Discord Community:** للمناقشات
- **Stack Overflow:** للأسئلة التقنية

---

## ⚠️ ملاحظات مهمة للأمان

### **حماية البيانات:**
- لا تشارك ملف `.env.local` أبداً
- استخدم HTTPS في الإنتاج
- فعّل Row Level Security في Supabase
- راجع الصلاحيات بانتظام

### **النسخ الاحتياطي:**
- احتفظ بنسخ احتياطية يومية
- اختبر استعادة البيانات شهرياً
- وثّق جميع التغييرات المهمة

### **مراقبة الأداء:**
- راقب استخدام قاعدة البيانات
- تحقق من سرعة التحميل
- راجع logs الأخطاء

---

**🎉 مبروك! مشروعك جاهز للعمل والتطوير!**
